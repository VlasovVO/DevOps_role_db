language: python
python:
- '3.6'
install:
- pip install ansible==2.6.1 molecule==2.16.0 apache-libcloud==2.3.0 pycrypto==2.6.1
env:
  matrix:
  - GCE_CREDENTIALS_FILE= "~/.ssh/infra-31376727bcfb.json"
  global:
  - secure: tDT1qRGvP8ooN1kBhr25xKgDdulgX/d9qm24UG6H2OCs3j0MP+7lBvpuNka6uyMCR451YhaU7Yb4EjJGoptxPnHi4IxIs9UMA4Whkh6oSLSjX4bLsAheffCXZ34LngV0rERthLwsvf7tUAUevTpG64IctBq2e0XYGRDdyADDkO6a0g9tXUCzhqTyEAArTphhT0/h7cwvXegy8wPW0cvv58kJxqBzk2HXr53XggVbmZ738IoYPY2cYtECvWWOV4O4eiaEb/82HRG0ph5MBySBaGwmVbWWO750EOtFZbSkS5I7AhQRx6VNQNrZ7L1dL3LLceegyUXmKxn/ite8WH7Svp20FRjIQENVGF7sHJupVdlnp5htjek2M6/LIIC8MvkPZxoLOjY4AXDtHdsWhl72KP5nH28Yi8diu98Q2dbSUOYv42P/oh5So51jsuCFwqbOSEZjNaEYs5u+sNe8nkWHZOfO+PHTsoM5mrdUGL07hb37Hkc3qiqiWXKw+hvH7z8mNbQHVF7gHC8DUEGntw+FESi35WrW/4GwNBdHeOa2BHNVGbihHLXjiS/OKRHwvdRvm4qFagU/9KdId7cbQ/WwzF8DHrI6rCG8B79yJ92E/s6QF84AVX8NOyoFkhCBiV+nU19+DQNfIfDuyBFjLYu8ApA9dw9RKpJgECrTJhMfoiI=
  - secure: wvqAA2RcJTvB5UmZmpHwcEVJD2cdMAAxwcfhCSucst9qsWl7dSwvfaAtzDialzsA5QFB6+b7nqgj75XOGvJ9TUo7PvRhStM+7SbZ1TcS5Rb62ND34xGFGO0ooPnWxcP+4jABGg4T980awhVEdBoU5l6ZCgnIvQ2s13zIb3xw8WXAAuO0zqkQ2Y4679kWsFgCo5+7D27W5hkOUVULZj0bYH0/mePat3s4x+SwKRnSAq/DZu+wjwVUOj/sqym+mvZpXP7hoUN4Oq3mQ4nMa+Wlwqqj1irC81E5Lxia+qxzL7qjnZG9Ohc+AbvdISUdy/SUNU+sNCAFKYs8SUM/fMxo9C7EF8bjFxbFHDlcez//JIOmJfKsotyHZdlq0S7E0ly2CCIWYdl6/QjH90K3OGQXbqLChisr8PXcAk9ElhH8pM1fne5RIgjsCLBgNbAYkiC0LKWZ3gvhfG35XCQNE9JT50WVxHMObQBactfIfkS1Mz0d5R9NT7isXIW4bQlwYWgijQ56COPYyDpiRSU4M14j09uPhTjr5OLIglyII527nzoHWkAy86J8v6bHdYlvwfkVEmj+ageoaSB1pKjxedbQoe5CZ+EOmTkDvwJnEzzdUEnbyvPtpeVHgGJnp5y6TRGqvaOjRf4115beIBFBsO4FW74LNVVrkT7FDSXViTWvQFU=
  - secure: t4lzT/y7Lxkr5V/WDEiEqtPATJAcyL4U/a8Q0aKfixvouUlMvIHS29a8JZkEOT9FdDo51iVX4B4fXTjf+CUeL4wldnB/xJKrI5f1QtAcXFPrgwQGgiVihQwSCj760+sGFQoTkh/F4vnJEtLoNwyci1rIkIcvGewcfgClyO5tELfoFduTtNv1Etmhu1J9Vo9ev/MTdMhFzlzlCX6lP/VY7x1DqaZig7G8SFweuwiqqgvE8LaeU/5kK7bhu+DvcVJ4vlXhviC7emYgaolTWU4BFII0n0bcis+5M+gVIh5gOfpmpEWSXMYcJr2tRN0Ba89pNc6gyRX4ljFgHog1GHocXv22Xh/vemk/hdEbd/xLEfi2WR3L0X+n5xS1WB4orxL7mL5VAVkKySKLdyrzjnz/WvBZjj2eNETd3x+FJA3KhOAMtQaVJQjKXaQZ7VWyaP5+Gl14lJgcjVcQaKc6ALT1YTP8p5F0JxBmvZLsDNFIWQqgjaG+wzIDcrLZYdJAvjDthhhhsMMmGS++XJW4hwV3cFZQaIoO06ov4XUDWrrYgNhxqc7O55vsgz0yfu005YGEs82YKFVR//+PIjGy8uC0SDGobmSCzYdp4RZtVmQqvtzAeNx9AHv19veAbkab1qJO1HG8pNnwmwbToJgWAL8XY5SnbP7KzxeORkJJX2T3cPU=
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
before_install:
- openssl aes-256-cbc -K $encrypted_cd23fe22b271_key -iv $encrypted_cd23fe22b271_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    secure: eed9J0eyQA34/xd0R2J42J/2JMdkDk9Lf6SuYU4uL0BsBPNNCfl3CvOMFY+p909HbVrEch5FnpLeeqFXji++Wb0u9dHUDShpJVl/ifnY8Wg5pYZ/7NvWfh1dLa+6qs0e+6YYAOgzktbu52xNYAqPXh0iycuaEmoQ0duBheZZ0lPUz7e/ircxWYs3RQIRyDIW2OQzd1HBWM++LGV0/1Yi0lg/JI9TmwoDG3zTFKWmq3QLgN5ZDFrrBy6WFceQxQ7yTr5iOcSTs6YoiQlF8sA4X9D2nJLevJcI3HCwlF+nnmnirPd75Et5a1U6tkbM6ihB40QOxYTHhCK/hLHV+DMqyljU1SjXo67qLy0ViriSKENfZNYvhx7RII6AS4aWn13na21iNEjIEiREsfVsRRLST+By5I0LOQyavf6HdLRI28tma1Uxe/peLKi1of/7c/ZXc/PvMAGQ9vuc6f7Lw337riqjtL5mIHzon/nU6PNbIFKcQFece8O73Ga74Oey5P+uXtBDmTsTssk+GMh/5BnJFYSaryNqZG1S8t8DKVK+oR4huKB62Wnhc2smnJvL9g5/3+dDC+TrkPoWFBN9k9ZsgcN+MnG2wa6GIyVPg+ngjgEh05JCHjcrYnx30R5hYLBPb62iH3yv2ovLWt1zKZXDfY8dlL6f9Qb4+sQtALQ62U4=
    rooms:
      secure: XLDtvn8SAXTeZhQ2CqRd+XoSMTUHbvBLBUWSbkT2Y8A48XuxJGk9/WzqzYxZk/ZJXmBv0U9slUnsBWRBO6LpX2aIZUav+9rgBVtY2yK+k823r0jcfAMnpOHyxnIMMF2Ye1BZ9ngoAZpy87d3X/R7H53vAH6YWEssQJp9i+F7qm47nPKnk8imSBXPBEKhlo2YhcmKSb+cTf5lLF3PTtwBJ7eqSXDOaPaplpRY3BaRGThyn/Fwu+hbKJK3Ob7TT4ghcevvD5Cfss3xayBbqLBCde0f/+r42NIiqP10BEORXT/Hyx9b1XAnkTuf77DtIDcK9icB2taL/eslPxwR/8FBfizSvY87XKOaH4l6lBTYnfROGt3Gg9Hu9I0X/uazg0QreblcypsQz6CAn9V10AE6Tm2z+5g93gjaPbYRKGfky77Uz6LjIwqCNHY8fcDM4aRrBIr9Jkm8buQcRB9HUynjvellRaeT5OWUsVap2i0UNxwRDRPkTXNKXUDq//xEPRX/xmpAoJS+bd9qzTKQwpJESVXeNXeppGYbwQtEmT+v+aeZarDKPK1CtSl3lEM5L8jvyWtOU4kPVcBcr5bgcSmeq1KluidjxxtvZgqMb1B8F0nVl9I8Kz812H8Xo+qgC3YRG3l1pbCoh0MYtZhUSMFsEEIPZ2DJygrh0Je2DBv+1gY=
